„É
5C:\_dev\repos\grok-cli\src\Utils\ParseGrokResponse.cs
	namespace 	
GrokCLI
 
{ 
public 

class 
Conversation 
{ 
public		 
string		 
?		 
conversationId		 %
{		& '
get		( +
;		+ ,
set		- 0
;		0 1
}		2 3
public

 
string

 
?

 
title

 
{

 
get

 "
;

" #
set

$ '
;

' (
}

) *
public 
bool 
starred 
{ 
get !
;! "
set# &
;& '
}( )
public 
DateTime 

createTime "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
DateTime 

modifyTime "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
string 
? 
systemPromptName '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
bool 
	temporary 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
? 
[ 
] 
? 

mediaTypes $
{% &
get' *
;* +
set, /
;/ 0
}1 2
} 
public 

class 
UserResponse 
{ 
public 
string 
? 

responseId !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
? 
message 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
? 
sender 
{ 
get  #
;# $
set% (
;( )
}* +
public 
DateTime 

createTime "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
bool 
manual 
{ 
get  
;  !
set" %
;% &
}' (
public 
bool 
partial 
{ 
get !
;! "
set# &
;& '
}( )
public 
bool 
shared 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
? 
query 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
? 
	queryType  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
object 
[ 
] 
? 
webSearchResults )
{* +
get, /
;/ 0
set1 4
;4 5
}6 7
public 
string 
[ 
] 
? 
xpostIds !
{" #
get$ '
;' (
set) ,
;, -
}. /
public   
object   
[   
]   
?   
xposts   
{    !
get  " %
;  % &
set  ' *
;  * +
}  , -
public!! 
string!! 
[!! 
]!! 
?!! 
generatedImageUrls!! +
{!!, -
get!!. 1
;!!1 2
set!!3 6
;!!6 7
}!!8 9
public"" 
object"" 
["" 
]"" 
?"" 
imageAttachments"" )
{""* +
get"", /
;""/ 0
set""1 4
;""4 5
}""6 7
public## 
object## 
[## 
]## 
?## 
fileAttachments## (
{##) *
get##+ .
;##. /
set##0 3
;##3 4
}##5 6
public$$ 
object$$ 
[$$ 
]$$ 
?$$ 
cardAttachmentsJson$$ ,
{$$- .
get$$/ 2
;$$2 3
set$$4 7
;$$7 8
}$$9 :
public%% 
string%% 
[%% 
]%% 
?%% 
fileUris%% !
{%%" #
get%%$ '
;%%' (
set%%) ,
;%%, -
}%%. /
public&& 
object&& 
[&& 
]&& 
?&& #
fileAttachmentsMetadata&& 0
{&&1 2
get&&3 6
;&&6 7
set&&8 ;
;&&; <
}&&= >
public'' 
bool'' 
	isControl'' 
{'' 
get''  #
;''# $
set''% (
;''( )
}''* +
public(( 
object(( 
[(( 
](( 
?(( 
steps(( 
{((  
get((! $
;(($ %
set((& )
;(() *
}((+ ,
public)) 
string)) 
[)) 
])) 
?)) 

mediaTypes)) #
{))$ %
get))& )
;))) *
set))+ .
;)). /
}))0 1
}** 
public,, 

class,, 
ResponseData,, 
{-- 
public.. 
UserResponse.. 
?.. 
userResponse.. )
{..* +
get.., /
;../ 0
set..1 4
;..4 5
}..6 7
public// 
bool// 

isThinking// 
{//  
get//! $
;//$ %
set//& )
;//) *
}//+ ,
public00 
bool00 

isSoftStop00 
{00  
get00! $
;00$ %
set00& )
;00) *
}00+ ,
public11 
string11 
?11 

responseId11 !
{11" #
get11$ '
;11' (
set11) ,
;11, -
}11. /
}22 
public44 

class44 
TokenResponse44 
{55 
public66 
string66 
?66 
token66 
{66 
get66 "
;66" #
set66$ '
;66' (
}66) *
public77 
bool77 

isThinking77 
{77  
get77! $
;77$ %
set77& )
;77) *
}77+ ,
public88 
bool88 

isSoftStop88 
{88  
get88! $
;88$ %
set88& )
;88) *
}88+ ,
public99 
string99 
?99 

responseId99 !
{99" #
get99$ '
;99' (
set99) ,
;99, -
}99. /
}:: 
public<< 

class<< 
FinalMetadata<< 
{== 
public>> 
string>> 
[>> 
]>> 
?>> 
followUpSuggestions>> ,
{>>- .
get>>/ 2
;>>2 3
set>>4 7
;>>7 8
}>>9 :
public?? 
string?? 
[?? 
]?? 
??? 
feedbackLabels?? '
{??( )
get??* -
;??- .
set??/ 2
;??2 3
}??4 5
public@@ 
object@@ 
?@@ 
	toolsUsed@@  
{@@! "
get@@# &
;@@& '
set@@( +
;@@+ ,
}@@- .
publicAA 
stringAA 
?AA 

disclaimerAA !
{AA" #
getAA$ '
;AA' (
setAA) ,
;AA, -
}AA. /
}BB 
publicDD 

classDD 
ModelResponseDD 
{EE 
publicFF 
stringFF 
?FF 

responseIdFF !
{FF" #
getFF$ '
;FF' (
setFF) ,
;FF, -
}FF. /
publicGG 
stringGG 
?GG 
messageGG 
{GG  
getGG! $
;GG$ %
setGG& )
;GG) *
}GG+ ,
publicHH 
stringHH 
?HH 
senderHH 
{HH 
getHH  #
;HH# $
setHH% (
;HH( )
}HH* +
publicII 
DateTimeII 

createTimeII "
{II# $
getII% (
;II( )
setII* -
;II- .
}II/ 0
publicJJ 
stringJJ 
?JJ 
parentResponseIdJJ '
{JJ( )
getJJ* -
;JJ- .
setJJ/ 2
;JJ2 3
}JJ4 5
publicKK 
boolKK 
manualKK 
{KK 
getKK  
;KK  !
setKK" %
;KK% &
}KK' (
publicLL 
boolLL 
partialLL 
{LL 
getLL !
;LL! "
setLL# &
;LL& '
}LL( )
publicMM 
boolMM 
sharedMM 
{MM 
getMM  
;MM  !
setMM" %
;MM% &
}MM' (
publicNN 
stringNN 
?NN 
queryNN 
{NN 
getNN "
;NN" #
setNN$ '
;NN' (
}NN) *
publicOO 
stringOO 
?OO 
	queryTypeOO  
{OO! "
getOO# &
;OO& '
setOO( +
;OO+ ,
}OO- .
publicPP 
objectPP 
[PP 
]PP 
?PP 
webSearchResultsPP )
{PP* +
getPP, /
;PP/ 0
setPP1 4
;PP4 5
}PP6 7
publicQQ 
stringQQ 
[QQ 
]QQ 
?QQ 
xpostIdsQQ !
{QQ" #
getQQ$ '
;QQ' (
setQQ) ,
;QQ, -
}QQ. /
publicRR 
objectRR 
[RR 
]RR 
?RR 
xpostsRR 
{RR  !
getRR" %
;RR% &
setRR' *
;RR* +
}RR, -
publicSS 
stringSS 
[SS 
]SS 
?SS 
generatedImageUrlsSS +
{SS, -
getSS. 1
;SS1 2
setSS3 6
;SS6 7
}SS8 9
publicTT 
objectTT 
[TT 
]TT 
?TT 
imageAttachmentsTT )
{TT* +
getTT, /
;TT/ 0
setTT1 4
;TT4 5
}TT6 7
publicUU 
objectUU 
[UU 
]UU 
?UU 
fileAttachmentsUU (
{UU) *
getUU+ .
;UU. /
setUU0 3
;UU3 4
}UU5 6
publicVV 
objectVV 
[VV 
]VV 
?VV 
cardAttachmentsJsonVV ,
{VV- .
getVV/ 2
;VV2 3
setVV4 7
;VV7 8
}VV9 :
publicWW 
stringWW 
[WW 
]WW 
?WW 
fileUrisWW !
{WW" #
getWW$ '
;WW' (
setWW) ,
;WW, -
}WW. /
publicXX 
objectXX 
[XX 
]XX 
?XX #
fileAttachmentsMetadataXX 0
{XX1 2
getXX3 6
;XX6 7
setXX8 ;
;XX; <
}XX= >
publicYY 
boolYY 
	isControlYY 
{YY 
getYY  #
;YY# $
setYY% (
;YY( )
}YY* +
publicZZ 
objectZZ 
[ZZ 
]ZZ 
?ZZ 
stepsZZ 
{ZZ  
getZZ! $
;ZZ$ %
setZZ& )
;ZZ) *
}ZZ+ ,
public[[ 
string[[ 
[[[ 
][[ 
?[[ 

mediaTypes[[ #
{[[$ %
get[[& )
;[[) *
set[[+ .
;[[. /
}[[0 1
}\\ 
public^^ 

class^^ 
Result^^ 
{__ 
public`` 
Conversation`` 
?`` 
conversation`` )
{``* +
get``, /
;``/ 0
set``1 4
;``4 5
}``6 7
publicaa 
ResponseDataaa 
?aa 
responseaa %
{aa& '
getaa( +
;aa+ ,
setaa- 0
;aa0 1
}aa2 3
publicbb 
TokenResponsebb 
?bb 
tokenbb #
{bb$ %
getbb& )
;bb) *
setbb+ .
;bb. /
}bb0 1
publiccc 
FinalMetadatacc 
?cc 
finalMetadatacc +
{cc, -
getcc. 1
;cc1 2
setcc3 6
;cc6 7
}cc8 9
publicdd 
ModelResponsedd 
?dd 
modelResponsedd +
{dd, -
getdd. 1
;dd1 2
setdd3 6
;dd6 7
}dd8 9
publicee 
NewTitleee 
?ee 
titleee 
{ee  
getee! $
;ee$ %
setee& )
;ee) *
}ee+ ,
}ff 
publichh 

classhh 
NewTitlehh 
{ii 
publicjj 
stringjj 
?jj 
newTitlejj 
{jj  !
getjj" %
;jj% &
setjj' *
;jj* +
}jj, -
}kk 
publicmm 

classmm 
GrokResponsemm 
{nn 
publicoo 
Resultoo 
?oo 
resultoo 
{oo 
getoo  #
;oo# $
setoo% (
;oo( )
}oo* +
}pp 
publicrr 

staticrr 
classrr 
ParseGrokResponserr )
{ss 
publictt 
statictt 
stringtt 
ParseResponsett *
(tt* +
bytett+ /
[tt/ 0
]tt0 1
responseBytestt2 ?
)tt? @
{uu 	
tryvv 
{ww 
stringxx 
responseTextxx #
=xx$ %
Encodingxx& .
.xx. /
UTF8xx/ 3
.xx3 4
	GetStringxx4 =
(xx= >
responseBytesxx> K
)xxK L
;xxL M
stringyy 
[yy 
]yy 
jsonObjectsyy $
=yy% &
responseTextyy' 3
.yy3 4
Splityy4 9
(yy9 :
newyy: =
[yy= >
]yy> ?
{yy@ A
$stryyB E
}yyF G
,yyG H
StringSplitOptionsyyI [
.yy[ \
RemoveEmptyEntriesyy\ n
)yyn o
.zz 
Selectzz 
(zz 
szz 
=>zz  
szz! "
+zz# $
$strzz% (
)zz( )
.{{ 
ToArray{{ 
({{ 
){{ 
;{{ 
string}} 
fullMessage}} "
=}}# $
$str}}% '
;}}' (
foreach~~ 
(~~ 
var~~ 
json~~ !
in~~" $
jsonObjects~~% 0
)~~0 1
{ 
if
ÄÄ 
(
ÄÄ 
string
ÄÄ 
.
ÄÄ  
IsNullOrWhiteSpace
ÄÄ 1
(
ÄÄ1 2
json
ÄÄ2 6
)
ÄÄ6 7
)
ÄÄ7 8
continue
ÄÄ9 A
;
ÄÄA B
var
ÇÇ 
grokResponse
ÇÇ $
=
ÇÇ% &
JsonSerializer
ÇÇ' 5
.
ÇÇ5 6
Deserialize
ÇÇ6 A
<
ÇÇA B
GrokResponse
ÇÇB N
>
ÇÇN O
(
ÇÇO P
json
ÇÇP T
)
ÇÇT U
;
ÇÇU V
if
ÉÉ 
(
ÉÉ 
grokResponse
ÉÉ $
?
ÉÉ$ %
.
ÉÉ% &
result
ÉÉ& ,
?
ÉÉ, -
.
ÉÉ- .
modelResponse
ÉÉ. ;
?
ÉÉ; <
.
ÉÉ< =
message
ÉÉ= D
!=
ÉÉE G
null
ÉÉH L
)
ÉÉL M
{
ÑÑ 
fullMessage
ÖÖ #
=
ÖÖ$ %
grokResponse
ÖÖ& 2
.
ÖÖ2 3
result
ÖÖ3 9
.
ÖÖ9 :
modelResponse
ÖÖ: G
.
ÖÖG H
message
ÖÖH O
;
ÖÖO P
}
ÜÜ 
}
áá 
return
ââ 
string
ââ 
.
ââ 
IsNullOrEmpty
ââ +
(
ââ+ ,
fullMessage
ââ, 7
)
ââ7 8
?
ââ9 :
$str
ââ; M
:
ââN O
fullMessage
ââP [
;
ââ[ \
}
ää 
catch
ãã 
(
ãã 
JsonException
ãã  
ex
ãã! #
)
ãã# $
{
åå 
return
çç 
$"
çç 
$str
çç -
{
çç- .
ex
çç. 0
.
çç0 1
Message
çç1 8
}
çç8 9
"
çç9 :
;
çç: ;
}
éé 
}
èè 	
}
êê 
}ëë „+
8C:\_dev\repos\grok-cli\src\Utils\HttpHeaderCollection.cs
	namespace 	
GrokCLI
 
. 
Utils 
{ 
public 

static 
class  
HttpHeaderCollection ,
{ 
private 
static 
readonly 
Lazy  $
<$ %
IReadOnlyDictionary% 8
<8 9
string9 ?
,? @
stringA G
>G H
>H I
BaseHeadersJ U
=V W
newX [
([ \
(\ ]
)] ^
=>_ a
{		 	
var

 
config

 
=

 
new

  
ConfigurationBuilder

 1
(

1 2
)

2 3
. 
SetBasePath 
( 
	Directory &
.& '
GetCurrentDirectory' :
(: ;
); <
)< =
. 
AddJsonFile 
( 
$str /
,/ 0
optional1 9
:9 :
false; @
,@ A
reloadOnChangeB P
:P Q
trueR V
)V W
. 
Build 
( 
) 
; 
var 
headers 
= 
config  
.  !

GetSection! +
(+ ,
$str, E
)E F
. 
Get 
< 

Dictionary 
<  
string  &
,& '
string( .
>. /
>/ 0
(0 1
)1 2
;2 3
return 
headers 
?? 
new !

Dictionary" ,
<, -
string- 3
,3 4
string5 ;
>; <
(< =
)= >
;> ?
} 	
)	 

;
 
public 
static 
IReadOnlyDictionary )
<) *
string* 0
,0 1
string2 8
>8 9
RateLimitHeaders: J
=>K M
BuildHeaders 
( 
$str +
)+ ,
;, -
public 
static 
IReadOnlyDictionary )
<) *
string* 0
,0 1
string2 8
>8 9
GrokHeaders: E
=>F H
BuildHeaders 
( 
$str &
)& '
;' (
public 
static 
IReadOnlyDictionary )
<) *
string* 0
,0 1
string2 8
>8 9
UploadHeaders: G
=>H J
BuildHeaders 
( 
$str (
)( )
;) *
private 
static 
IReadOnlyDictionary *
<* +
string+ 1
,1 2
string3 9
>9 :
BuildHeaders; G
(G H
stringH N
sectionNameO Z
)Z [
{ 	
var   
config   
=   
new    
ConfigurationBuilder   1
(  1 2
)  2 3
.!! 
SetBasePath!! 
(!! 
	Directory!! &
.!!& '
GetCurrentDirectory!!' :
(!!: ;
)!!; <
)!!< =
."" 
AddJsonFile"" 
("" 
$str"" /
,""/ 0
optional""1 9
:""9 :
false""; @
,""@ A
reloadOnChange""B P
:""P Q
true""R V
)""V W
.## 
Build## 
(## 
)## 
;## 
var%% 
specificHeaders%% 
=%%  !
config%%" (
.%%( )

GetSection%%) 3
(%%3 4
$"%%4 6
$str%%6 B
{%%B C
sectionName%%C N
}%%N O
"%%O P
)%%P Q
.&& 
Get&& 
<&& 

Dictionary&& 
<&&  
string&&  &
,&&& '
string&&( .
>&&. /
>&&/ 0
(&&0 1
)&&1 2
??&&3 5
new&&6 9

Dictionary&&: D
<&&D E
string&&E K
,&&K L
string&&M S
>&&S T
(&&T U
)&&U V
;&&V W
var(( 
combinedHeaders(( 
=((  !
new((" %

Dictionary((& 0
<((0 1
string((1 7
,((7 8
string((9 ?
>((? @
(((@ A
BaseHeaders((A L
.((L M
Value((M R
)((R S
;((S T
foreach** 
(** 
var** 
header** 
in**  "
specificHeaders**# 2
)**2 3
{++ 
if,, 
(,, 
header,, 
.,, 
Key,, 
==,, !
$str,," -
),,- .
{-- 
combinedHeaders.. #
[..# $
$str..$ ,
].., -
=... /
$"..0 2
{..2 3
combinedHeaders..3 B
[..B C
$str..C K
]..K L
}..L M
$str..M O
{..O P
header..P V
...V W
Value..W \
}..\ ]
"..] ^
;..^ _
}// 
else00 
{11 
combinedHeaders22 #
[22# $
header22$ *
.22* +
Key22+ .
]22. /
=220 1
header222 8
.228 9
Value229 >
;22> ?
}33 
}44 
return66 
combinedHeaders66 "
;66" #
}77 	
}88 
}99 û
.C:\_dev\repos\grok-cli\src\Utils\FileHelper.cs
	namespace 	
GrokCLI
 
{ 
public 

static 
class 

FileHelper "
{ 
public 
static 
FileInfo 
? 
GetFileInfo  +
(+ ,
string, 2
filePath3 ;
); <
{ 	
if 
( 
string 
. 
IsNullOrWhiteSpace )
() *
filePath* 2
)2 3
)3 4
{ 
throw 
new 
ArgumentException +
(+ ,
$str, ]
,] ^
nameof_ e
(e f
filePathf n
)n o
)o p
;p q
} 
if 
( 
! 
File 
. 
Exists 
( 
filePath %
)% &
)& '
{ 
Console 
. 
	WriteLine !
(! "
$"" $
$str$ J
{J K
filePathK S
}S T
"T U
)U V
;V W
return 
null 
; 
} 
try 
{ 
return   
new   
FileInfo   #
(  # $
filePath  $ ,
)  , -
;  - .
}!! 
catch"" 
("" 
	Exception"" 
ex"" 
)""  
{## 
Console%% 
.%% 
	WriteLine%% !
(%%! "
$"%%" $
$str%%$ D
{%%D E
filePath%%E M
}%%M N
$str%%N P
{%%P Q
ex%%Q S
.%%S T
Message%%T [
}%%[ \
"%%\ ]
)%%] ^
;%%^ _
return&& 
null&& 
;&& 
}'' 
}(( 	
})) 
}** ó.
-C:\_dev\repos\grok-cli\src\Services\Upload.cs
public 
class 
Upload 
{ 
private		 
static		 
readonly		 

HttpClient		 &
client		' -
=		. /
new		0 3

HttpClient		4 >
(		> ?
)		? @
;		@ A
public 

async 
Task 
< 
string 
> 
Execute %
(% &
FileInfo& .
file/ 3
)3 4
{ 
Console 
. 
	WriteLine 
( 
$str (
)( )
;) *
byte 
[ 
] 
	fileBytes 
= 
await  
File! %
.% &
ReadAllBytesAsync& 7
(7 8
file8 <
.< =
FullName= E
)E F
;F G
string 
base64Content 
= 
Convert &
.& '
ToBase64String' 5
(5 6
	fileBytes6 ?
)? @
;@ A
var 
jsonPayload 
= 
new 
{ 	
fileName 
= 
file 
. 
Name  
,  !
fileMimeType 
= 
GetMimeType &
(& '
file' +
.+ ,
	Extension, 5
)5 6
,6 7
content 
= 
base64Content #
} 	
;	 

string 

jsonString 
= 

Newtonsoft &
.& '
Json' +
.+ ,
JsonConvert, 7
.7 8
SerializeObject8 G
(G H
jsonPayloadH S
)S T
;T U
var 
content 
= 
new 
StringContent '
(' (

jsonString( 2
,2 3
Encoding4 <
.< =
UTF8= A
,A B
$strC U
)U V
;V W
var   
request   
=   
new   
HttpRequestMessage   ,
{!! 	
Method"" 
="" 

HttpMethod"" 
.""  
Post""  $
,""$ %

RequestUri## 
=## 
new## 
Uri##  
(##  !
$str##! M
)##M N
,##N O
Content$$ 
=$$ 
content$$ 
}%% 	
;%%	 

foreach'' 
('' 
var'' 
header'' 
in''  
HttpHeaderCollection'' 3
.''3 4
UploadHeaders''4 A
)''A B
{(( 	
request)) 
.)) 
Headers)) 
.)) 
Add)) 
())  
header))  &
.))& '
Key))' *
,))* +
header)), 2
.))2 3
Value))3 8
)))8 9
;))9 :
}** 	
Console-- 
.-- 
	WriteLine-- 
(-- 
$str-- &
)--& '
;--' (
HttpResponseMessage.. 
response.. $
=..% &
await..' ,
client..- 3
...3 4
	SendAsync..4 =
(..= >
request..> E
)..E F
;..F G
if11 

(11 
!11 
response11 
.11 
IsSuccessStatusCode11 )
)11) *
{22 	
string33 
errorContent33 
=33  !
await33" '
response33( 0
.330 1
Content331 8
.338 9
ReadAsStringAsync339 J
(33J K
)33K L
;33L M
Console44 
.44 
	WriteLine44 
(44 
$"44  
$str44  ,
{44, -
response44- 5
.445 6

StatusCode446 @
}44@ A
$str44A D
{44D E
errorContent44E Q
}44Q R
"44R S
)44S T
;44T U
return55 
$"55 
$str55 !
{55! "
response55" *
.55* +

StatusCode55+ 5
}555 6
$str556 9
{559 :
errorContent55: F
}55F G
"55G H
;55H I
}66 	
response88 
.88 #
EnsureSuccessStatusCode88 (
(88( )
)88) *
;88* +
Console99 
.99 
	WriteLine99 
(99 
$str99 !
)99! "
;99" #
Console:: 
.:: 
	WriteLine:: 
(:: 
$str:: )
)::) *
;::* +
string;; 
responseBody;; 
=;; 
await;; #
response;;$ ,
.;;, -
Content;;- 4
.;;4 5
ReadAsStringAsync;;5 F
(;;F G
);;G H
;;;H I
Console<< 
.<< 
	WriteLine<< 
(<< 
$str<< %
)<<% &
;<<& '
return== 
responseBody== 
;== 
}>> 
private@@ 
string@@ 
GetMimeType@@ 
(@@ 
string@@ %
	extension@@& /
)@@/ 0
{AA 
switchBB 
(BB 
	extensionBB 
.BB 
ToLowerBB !
(BB! "
)BB" #
)BB# $
{CC 	
caseDD 
$strDD 
:DD 
returnEE 
$strEE "
;EE" #
caseFF 
$strFF 
:FF 
caseGG 
$strGG 
:GG 
returnHH 
$strHH #
;HH# $
caseII 
$strII 
:II 
returnJJ 
$strJJ (
;JJ( )
defaultKK 
:KK 
returnLL 
$strLL 1
;LL1 2
}MM 	
}NN 
}OO –
+C:\_dev\repos\grok-cli\src\Services\Grok.cs
	namespace

 	
GrokCLI


 
{ 
public 

class 
Grok 
{ 
public 

async 
Task 
< 
byte 
[ 
] 
> 
Execute %
(% &
string& ,
message- 4
=5 6
$str7 F
)F G
{ 	
using 
( 
var 
client 
= 
new  #

HttpClient$ .
(. /
)/ 0
)0 1
{ 
var 
url 
= 
$str L
;L M
var 
jsonPayload 
=  !
$str	" ê
;
ê ë
var 
content 
= 
new !
StringContent" /
(/ 0
jsonPayload0 ;
,; <
Encoding= E
.E F
UTF8F J
,J K
$strL ^
)^ _
;_ `
var 
request 
= 
new !
HttpRequestMessage" 4
(4 5

HttpMethod5 ?
.? @
Post@ D
,D E
urlF I
)I J
;J K
foreach 
( 
var 
header #
in$ & 
HttpHeaderCollection' ;
.; <
GrokHeaders< G
)G H
{ 
request 
. 
Headers #
.# $
Add$ '
(' (
header( .
.. /
Key/ 2
,2 3
header4 :
.: ;
Value; @
)@ A
;A B
} 
request 
. 
Content 
=  !
content" )
;) *
try 
{ 
var   
response    
=  ! "
await  # (
client  ) /
.  / 0
	SendAsync  0 9
(  9 :
request  : A
)  A B
;  B C
response!! 
.!! #
EnsureSuccessStatusCode!! 4
(!!4 5
)!!5 6
;!!6 7
return"" 
await""  
response""! )
."") *
Content""* 1
.""1 2 
ReadAsByteArrayAsync""2 F
(""F G
)""G H
;""H I
}## 
catch$$ 
($$  
HttpRequestException$$ +
ex$$, .
)$$. /
{%% 
Console&& 
.&& 
	WriteLine&& %
(&&% &
$"&&& (
$str&&( /
{&&/ 0
ex&&0 2
.&&2 3
Message&&3 :
}&&: ;
"&&; <
)&&< =
;&&= >
throw'' 
;'' 
}(( 
})) 
}** 	
}++ 
}-- ï
3C:\_dev\repos\grok-cli\src\Commands\PreviewImage.cs
	namespace 	
GrokCLI
 
{ 
public 

class 
PreviewImage 
( 
string $
imageUrl% -
)- .
{		 
public

 
string

 
ImageUrl

 
{

  
get

! $
;

$ %
private

& -
set

. 1
;

1 2
}

3 4
=

5 6
imageUrl

7 ?
;

? @
public 
byte 
[ 
] 
? 
	ImageData  
{! "
get# &
;& '
private( /
set0 3
;3 4
}5 6
public 
string 
? 
ContentType "
{# $
get% (
;( )
private* 1
set2 5
;5 6
}7 8
private 
readonly 

HttpClient #
_httpClient$ /
=0 1
new2 5

HttpClient6 @
(@ A
)A B
;B C
public 
async 
Task 
LoadImageAsync (
(( )
)) *
{ 	
try 
{ 
HttpResponseMessage #
response$ ,
=- .
await/ 4
_httpClient5 @
.@ A
GetAsyncA I
(I J
ImageUrlJ R
)R S
;S T
response 
. #
EnsureSuccessStatusCode 0
(0 1
)1 2
;2 3
ContentType 
= 
response &
.& '
Content' .
.. /
Headers/ 6
.6 7
ContentType7 B
?B C
.C D
	MediaTypeD M
;M N
	ImageData 
= 
await !
response" *
.* +
Content+ 2
.2 3 
ReadAsByteArrayAsync3 G
(G H
)H I
;I J
} 
catch 
(  
HttpRequestException '
ex( *
)* +
{ 
Console 
. 
	WriteLine !
(! "
$"" $
$str$ 9
{9 :
ex: <
.< =
Message= D
}D E
"E F
)F G
;G H
	ImageData 
= 
null  
;  !
} 
catch 
( 
	Exception 
ex 
)  
{   
Console"" 
."" 
	WriteLine"" !
(""! "
$"""" $
$str""$ B
{""B C
ex""C E
.""E F
Message""F M
}""M N
"""N O
)""O P
;""P Q
	ImageData## 
=## 
null##  
;##  !
}$$ 
}%% 	
}&& 
}'' µD
3C:\_dev\repos\grok-cli\src\Services\GetRateLimit.cs
	namespace

 	
GrokCLI


 
{ 
public 

class 
GetRateLimit 
{ 
public 
async 
Task 
< 
string  
>  !
Execute" )
() *
)* +
{ 	
using 
( 
var 
client 
= 
new  #

HttpClient$ .
(. /
)/ 0
)0 1
{ 
var 
request 
= 
new !
HttpRequestMessage" 4
(4 5

HttpMethod5 ?
.? @
Post@ D
,D E
$strF i
)i j
;j k
foreach 
( 
var 
header #
in$ & 
HttpHeaderCollection' ;
.; <
RateLimitHeaders< L
)L M
{ 
request 
. 
Headers #
.# $
Add$ '
(' (
header( .
.. /
Key/ 2
,2 3
header4 :
.: ;
Value; @
)@ A
;A B
} 
var 
content 
= 
new !
StringContent" /
(/ 0
$str0 m
,m n
nullo s
,s t
$str	u á
)
á à
;
à â
request 
. 
Content 
=  !
content" )
;) *
var 
response 
= 
await $
client% +
.+ ,
	SendAsync, 5
(5 6
request6 =
)= >
;> ?
response 
. #
EnsureSuccessStatusCode 0
(0 1
)1 2
;2 3
Console 
. 
	WriteLine !
(! "
$str" 2
+3 4
response5 =
.= >
Content> E
.E F
HeadersF M
.M N
ContentTypeN Y
)Y Z
;Z [
Console   
.   
	WriteLine   !
(  ! "
$str  " 6
+  7 8
(  9 :
response  : B
.  B C
Content  C J
.  J K
Headers  K R
.  R S
ContentEncoding  S b
?  b c
.  c d
FirstOrDefault  d r
(  r s
)  s t
??  u w
$str  x ~
)  ~ 
)	   Ä
;
  Ä Å
byte## 
[## 
]## 
responseBytes## $
=##% &
await##' ,
response##- 5
.##5 6
Content##6 =
.##= > 
ReadAsByteArrayAsync##> R
(##R S
)##S T
;##T U
if&& 
(&& 
response&& 
.&& 
Content&& $
.&&$ %
Headers&&% ,
.&&, -
ContentEncoding&&- <
!=&&= ?
null&&@ D
&&&&E G
response&&H P
.&&P Q
Content&&Q X
.&&X Y
Headers&&Y `
.&&` a
ContentEncoding&&a p
.&&p q
Any&&q t
(&&t u
)&&u v
)&&v w
{'' 
string(( 
?(( 
contentEncoding(( +
=((, -
response((. 6
.((6 7
Content((7 >
.((> ?
Headers((? F
.((F G
ContentEncoding((G V
.((V W
FirstOrDefault((W e
(((e f
)((f g
;((g h
Console)) 
.)) 
	WriteLine)) %
())% &
$"))& (
$str))( N
{))N O
contentEncoding))O ^
}))^ _
"))_ `
)))` a
;))a b
if++ 
(++ 
contentEncoding++ '
?++' (
.++( )
Contains++) 1
(++1 2
$str++2 8
,++8 9
StringComparison++: J
.++J K
OrdinalIgnoreCase++K \
)++\ ]
==++^ `
true++a e
)++e f
{,, 
using-- 
(-- 
var-- "
memoryStream--# /
=--0 1
new--2 5
MemoryStream--6 B
(--B C
responseBytes--C P
)--P Q
)--Q R
using.. 
(.. 
var.. "

gzipStream..# -
=... /
new..0 3

GZipStream..4 >
(..> ?
memoryStream..? K
,..K L
CompressionMode..M \
...\ ]

Decompress..] g
)..g h
)..h i
using// 
(// 
var// "
decompressedStream//# 5
=//6 7
new//8 ;
MemoryStream//< H
(//H I
)//I J
)//J K
{00 

gzipStream11 &
.11& '
CopyTo11' -
(11- .
decompressedStream11. @
)11@ A
;11A B
responseBytes22 )
=22* +
decompressedStream22, >
.22> ?
ToArray22? F
(22F G
)22G H
;22H I
}33 
}44 
else55 
if55 
(55 
contentEncoding55 ,
?55, -
.55- .
Contains55. 6
(556 7
$str557 @
,55@ A
StringComparison55B R
.55R S
OrdinalIgnoreCase55S d
)55d e
==55f h
true55i m
)55m n
{66 
using77 
(77 
var77 "
memoryStream77# /
=770 1
new772 5
MemoryStream776 B
(77B C
responseBytes77C P
)77P Q
)77Q R
using88 
(88 
var88 "
deflateStream88# 0
=881 2
new883 6
DeflateStream887 D
(88D E
memoryStream88E Q
,88Q R
CompressionMode88S b
.88b c

Decompress88c m
)88m n
)88n o
using99 
(99 
var99 "
decompressedStream99# 5
=996 7
new998 ;
MemoryStream99< H
(99H I
)99I J
)99J K
{:: 
deflateStream;; )
.;;) *
CopyTo;;* 0
(;;0 1
decompressedStream;;1 C
);;C D
;;;D E
responseBytes<< )
=<<* +
decompressedStream<<, >
.<<> ?
ToArray<<? F
(<<F G
)<<G H
;<<H I
}== 
}>> 
else?? 
if?? 
(?? 
contentEncoding?? ,
???, -
.??- .
Contains??. 6
(??6 7
$str??7 ;
,??; <
StringComparison??= M
.??M N
OrdinalIgnoreCase??N _
)??_ `
==??a c
true??d h
)??h i
{@@ 
usingCC 
(CC 
varCC "
memoryStreamCC# /
=CC0 1
newCC2 5
MemoryStreamCC6 B
(CCB C
responseBytesCCC P
)CCP Q
)CCQ R
usingDD 
(DD 
varDD "
brotliStreamDD# /
=DD0 1
newDD2 5
BrotliStreamDD6 B
(DDB C
memoryStreamDDC O
,DDO P
CompressionModeDDQ `
.DD` a

DecompressDDa k
)DDk l
)DDl m
usingEE 
(EE 
varEE "
decompressedStreamEE# 5
=EE6 7
newEE8 ;
MemoryStreamEE< H
(EEH I
)EEI J
)EEJ K
{FF 
brotliStreamGG (
.GG( )
CopyToGG) /
(GG/ 0
decompressedStreamGG0 B
)GGB C
;GGC D
responseBytesHH )
=HH* +
decompressedStreamHH, >
.HH> ?
ToArrayHH? F
(HHF G
)HHG H
;HHH I
}II 
}JJ 
elseKK 
ifKK 
(KK 
contentEncodingKK ,
?KK, -
.KK- .
ContainsKK. 6
(KK6 7
$strKK7 =
,KK= >
StringComparisonKK? O
.KKO P
OrdinalIgnoreCaseKKP a
)KKa b
==KKc e
trueKKf j
)KKj k
{LL 
ConsoleMM 
.MM  
	WriteLineMM  )
(MM) *
$strMM* r
)MMr s
;MMs t
returnNN 
$strNN >
;NN> ?
}OO 
}PP 
stringSS 
resultStringSS #
=SS$ %
EncodingSS& .
.SS. /
UTF8SS/ 3
.SS3 4
	GetStringSS4 =
(SS= >
responseBytesSS> K
)SSK L
;SSL M
returnTT 
resultStringTT #
;TT# $
}UU 
}VV 	
}WW 
}XX ˛9
%C:\_dev\repos\grok-cli\src\Program.cs
Console 
. 
	WriteLine 
( 
$str $
)$ %
;% &
if		 
(		 
args		 
==			 
null		 
||		 
args		 
.		 
Length		 
==		  "
$num		# $
)		$ %
{

 
Console 
. 
	WriteLine 
( 
$str h
)h i
;i j
await 	
new
 
Grok 
( 
) 
. 
Execute 
( 
$str 3
)3 4
;4 5
return 

;
 
} 
Console 
. 
	WriteLine 
( 
$" 
$str 
{ 
string !
.! "
Join" &
(& '
$str' +
,+ ,
args- 1
)1 2
}2 3
"3 4
)4 5
;5 6
string 
commandPrefix 
= 
args 
. 
Length "
># $
$num% &
&&' )
args* .
[. /
$num/ 0
]0 1
.1 2
ToLower2 9
(9 :
): ;
==< >
$str? E
?F G
$strH N
:O P
$strQ S
;S T
string 
command 
= 
args 
. 
Length 
> 
(  
commandPrefix  -
==. 0
$str1 7
?8 9
$num: ;
:< =
$num> ?
)? @
?A B
( 
commandPrefix 
== 
$str 
? 
args #
[# $
$num$ %
]% &
.& '
ToLower' .
(. /
)/ 0
:1 2
args3 7
[7 8
$num8 9
]9 :
.: ;
ToLower; B
(B C
)C D
)D E
:F G
$strH N
;N O
string 
? 
	parameter 
= 
args 
. 
Length 
>  !
(" #
commandPrefix# 0
==1 3
$str4 :
?; <
$num= >
:? @
$numA B
)B C
?D E
argsF J
[J K
commandPrefixK X
==Y [
$str\ b
?c d
$nume f
:g h
$numi j
]j k
:l m
nulln r
;r s
Console 
. 
	WriteLine 
( 
$" 
$str 
{ 
command %
}% &
$str& 3
{3 4
	parameter4 =
}= >
"> ?
)? @
;@ A
if 
( 
string 

.
 
IsNullOrEmpty 
( 
command  
)  !
)! "
{ 
Console 
. 
	WriteLine 
( 
$str l
)l m
;m n
await 	
new
 
Grok 
( 
) 
. 
Execute 
( 
$str 3
)3 4
;4 5
return 

;
 
} 
switch 
( 
command 
) 
{ 
case   
$str  	 
:   
if!! 

(!! 
string!! 
.!! 
IsNullOrEmpty!!  
(!!  !
	parameter!!! *
)!!* +
)!!+ ,
{"" 	
Console## 
.## 
	WriteLine## 
(## 
$str## x
)##x y
;##y z
return$$ 
;$$ 
}%% 	
FileInfo&& 
?&& 
f&& 
=&& 

FileHelper&&  
.&&  !
GetFileInfo&&! ,
(&&, -
	parameter&&- 6
)&&6 7
;&&7 8
if'' 

('' 
f'' 
is'' 
FileInfo'' 
fileInfo'' "
)''" #
{''$ %
_(( 
=(( 
await(( 
new(( 
Upload((  
(((  !
)((! "
.((" #
Execute((# *
(((* +
fileInfo((+ 3
)((3 4
;((4 5
})) 	
else))
 
{)) 
Console** 
.** 
	WriteLine** 
(** 
$"**  
$str**  0
{**0 1
	parameter**1 :
}**: ;
"**; <
)**< =
;**= >
}++ 	
break,, 
;,, 
case.. 
$str..	 
:.. 
if// 

(// 
string// 
.// 
IsNullOrEmpty//  
(//  !
	parameter//! *
)//* +
)//+ ,
{00 	
Console11 
.11 
	WriteLine11 
(11 
$str11 k
)11k l
;11l m
return22 
;22 
}33 	
await44 
new44 
Grok44 
(44 
)44 
.44 
Execute44  
(44  !
	parameter44! *
)44* +
;44+ ,
break55 
;55 
case77 
$str77	 
:77 
await88 
new88 
GetRateLimit88 
(88 
)88  
.88  !
Execute88! (
(88( )
)88) *
;88* +
break99 
;99 
case;; 
$str;;	 
:;; 
string<< 
imageUrl<< 
=<< 
$str	<< ë
;
<<ë í
PreviewImage== 
preview== 
=== 
new== "
PreviewImage==# /
(==/ 0
imageUrl==0 8
)==8 9
;==9 :
await>> 
preview>> 
.>> 
LoadImageAsync>> $
(>>$ %
)>>% &
;>>& '
if?? 

(?? 
preview?? 
.?? 
	ImageData?? 
!=??  
null??! %
)??% &
{@@ 	
ConsoleAA 
.AA 
	WriteLineAA 
(AA 
$"AA  
$strAA  ?
{AA? @
previewAA@ G
.AAG H
	ImageDataAAH Q
.AAQ R
LengthAAR X
}AAX Y
$strAAY n
{AAn o
previewAAo v
.AAv w
ContentType	AAw Ç
}
AAÇ É
"
AAÉ Ñ
)
AAÑ Ö
;
AAÖ Ü
}BB 	
elseCC 
{DD 	
ConsoleEE 
.EE 
	WriteLineEE 
(EE 
$strEE 9
)EE9 :
;EE: ;
}FF 	
breakGG 
;GG 
defaultII 
:II 
ConsoleJJ 
.JJ 
	WriteLineJJ 
(JJ 
$"JJ 
$strJJ -
{JJ- .
commandJJ. 5
}JJ5 6
$strJJ6 p
"JJp q
)JJq r
;JJr s
awaitKK 
newKK 
GrokKK 
(KK 
)KK 
.KK 
ExecuteKK  
(KK  !
$strKK! 7
)KK7 8
;KK8 9
breakLL 
;LL 
}MM 